   name: Android Build and Release

   on:
     push:
       branches: [ "master" ]

   jobs:
     build_and_release:
       runs-on: ubuntu-latest

       steps:
         - uses: actions/checkout@v3

         - uses: actions/setup-java@v3
           with:
             java-version: '11'
             distribution: 'temurin'
             cache: gradle

         - name: Grant execute permission for gradlew
           run: chmod +x gradlew

         - name: Build with Gradle
           run: ./gradlew assembleRelease

         - name: Create GitHub release
           id: create_release
           uses: actions/create-release@v1
           env:
             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
           with:
             tag_name: ${{ github.ref }}
             release_name: Release ${{ github.ref }}
             draft: false
             prerelease: false

         - name: Upload Release APK
           uses: actions/upload-release-asset@v1.0.1
           env:
             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
           with:
             upload_url: ${{ steps.create_release.outputs.upload_url }}
             asset_path: ./app/build/outputs/apk/release/app-release.apk
             asset_name: app-release.apk
             asset_content_type: application/vnd.android.package-archive
